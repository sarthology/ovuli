{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"/home/harshit/Desktop/projects/ovuli/node_modules/react-native-calendars/src/expandableCalendar/calendarProvider.js\";\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport dateutils from \"../dateutils\";\nimport { xdateToData } from \"../interface\";\nimport styleConstructor from \"./style\";\nimport CalendarContext from \"./calendarContext\";\n\nvar commons = require(\"./commons\");\n\nvar UPDATE_SOURCES = commons.UPDATE_SOURCES;\n\nvar iconDown = require(\"../img/down.png\");\n\nvar iconUp = require(\"../img/up.png\");\n\nvar TOP_POSITION = 65;\n\nvar CalendarProvider = function (_Component) {\n  _inherits(CalendarProvider, _Component);\n\n  function CalendarProvider(props) {\n    var _this;\n\n    _classCallCheck(this, CalendarProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CalendarProvider).call(this, props));\n\n    _this.getProviderContextValue = function () {\n      return {\n        setDate: _this.setDate,\n        date: _this.state.date,\n        updateSource: _this.state.updateSource,\n        setDisabled: _this.setDisabled\n      };\n    };\n\n    _this.setDate = function (date, updateSource) {\n      var sameMonth = dateutils.sameMonth(XDate(date), XDate(_this.state.date));\n\n      _this.setState({\n        date: date,\n        updateSource: updateSource,\n        buttonIcon: _this.getButtonIcon(date)\n      }, function () {\n        _this.animateTodayButton(date);\n      });\n\n      _.invoke(_this.props, 'onDateChanged', date, updateSource);\n\n      if (!sameMonth) {\n        _.invoke(_this.props, 'onMonthChange', xdateToData(XDate(date)), updateSource);\n      }\n    };\n\n    _this.setDisabled = function (disabled) {\n      if (_this.props.showTodayButton && disabled !== _this.state.disabled) {\n        _this.setState({\n          disabled: disabled\n        });\n\n        _this.animateOpacity(disabled);\n      }\n    };\n\n    _this.onTodayPress = function () {\n      var today = XDate().toString('yyyy-MM-dd');\n\n      _this.setDate(today, UPDATE_SOURCES.TODAY_PRESS);\n    };\n\n    _this.style = styleConstructor(props.theme);\n    _this.state = {\n      date: _this.props.date || XDate().toString('yyyy-MM-dd'),\n      updateSource: UPDATE_SOURCES.CALENDAR_INIT,\n      buttonY: new Animated.Value(-props.todayBottomMargin || -TOP_POSITION),\n      buttonIcon: _this.getButtonIcon(props.date),\n      disabled: false,\n      opacity: new Animated.Value(1)\n    };\n    return _this;\n  }\n\n  _createClass(CalendarProvider, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.date !== this.props.date) {\n        this.setDate(this.props.date, UPDATE_SOURCES.PROP_UPDATE);\n      }\n    }\n  }, {\n    key: \"getButtonIcon\",\n    value: function getButtonIcon(date) {\n      if (!this.props.showTodayButton) {\n        return;\n      }\n\n      var isPastDate = this.isPastDate(date);\n      return isPastDate ? iconDown : iconUp;\n    }\n  }, {\n    key: \"isPastDate\",\n    value: function isPastDate(date) {\n      var today = XDate();\n      var d = XDate(date);\n\n      if (today.getFullYear() > d.getFullYear()) {\n        return true;\n      }\n\n      if (today.getFullYear() === d.getFullYear()) {\n        if (today.getMonth() > d.getMonth()) {\n          return true;\n        }\n\n        if (today.getMonth() === d.getMonth()) {\n          if (today.getDate() > d.getDate()) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"animateTodayButton\",\n    value: function animateTodayButton(date) {\n      if (this.props.showTodayButton) {\n        var today = XDate().toString('yyyy-MM-dd');\n        var isToday = today === date;\n        Animated.spring(this.state.buttonY, {\n          toValue: isToday ? TOP_POSITION : -this.props.todayBottomMargin || -TOP_POSITION,\n          tension: 30,\n          friction: 8,\n          useNativeDriver: true\n        }).start();\n      }\n    }\n  }, {\n    key: \"animateOpacity\",\n    value: function animateOpacity(disabled) {\n      var disabledOpacity = this.props.disabledOpacity;\n\n      if (disabledOpacity) {\n        Animated.timing(this.state.opacity, {\n          toValue: disabled ? disabledOpacity : 1,\n          duration: 500\n        }).start();\n      }\n    }\n  }, {\n    key: \"renderTodayButton\",\n    value: function renderTodayButton() {\n      var _this$state = this.state,\n          disabled = _this$state.disabled,\n          opacity = _this$state.opacity,\n          buttonY = _this$state.buttonY,\n          buttonIcon = _this$state.buttonIcon;\n      var todayString = XDate.locales[XDate.defaultLocale].today || commons.todayString;\n      var today = todayString.charAt(0).toUpperCase() + todayString.slice(1);\n      return React.createElement(Animated.View, {\n        style: [this.style.todayButtonContainer, {\n          transform: [{\n            translateY: buttonY\n          }]\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: [this.style.todayButton, this.props.todayButtonStyle],\n        onPress: this.onTodayPress,\n        disabled: disabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        }\n      }, React.createElement(Animated.Image, {\n        style: [this.style.todayButtonImage, {\n          opacity: opacity\n        }],\n        source: buttonIcon,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        }\n      }), React.createElement(Animated.Text, {\n        allowFontScaling: false,\n        style: [this.style.todayButtonText, {\n          opacity: opacity\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        }\n      }, today)));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(CalendarContext.Provider, {\n        value: this.getProviderContextValue(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        }\n      }, React.createElement(View, {\n        style: [{\n          flex: 1\n        }, this.props.style],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        }\n      }, this.props.children), this.props.showTodayButton && this.renderTodayButton());\n    }\n  }]);\n\n  return CalendarProvider;\n}(Component);\n\nCalendarProvider.displayName = 'CalendarProvider';\nCalendarProvider.propTypes = {\n  date: PropTypes.any.isRequired,\n  onDateChanged: PropTypes.func,\n  onMonthChange: PropTypes.func,\n  showTodayButton: PropTypes.bool,\n  todayBottomMargin: PropTypes.number,\n  todayButtonStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n  disabledOpacity: PropTypes.number\n};\nexport default CalendarProvider;","map":{"version":3,"sources":["/home/harshit/Desktop/projects/ovuli/node_modules/react-native-calendars/src/expandableCalendar/calendarProvider.js"],"names":["_","React","Component","PropTypes","XDate","dateutils","xdateToData","styleConstructor","CalendarContext","commons","require","UPDATE_SOURCES","iconDown","iconUp","TOP_POSITION","CalendarProvider","props","getProviderContextValue","setDate","date","state","updateSource","setDisabled","sameMonth","setState","buttonIcon","getButtonIcon","animateTodayButton","invoke","disabled","showTodayButton","animateOpacity","onTodayPress","today","toString","TODAY_PRESS","style","theme","CALENDAR_INIT","buttonY","Animated","Value","todayBottomMargin","opacity","prevProps","PROP_UPDATE","isPastDate","d","getFullYear","getMonth","getDate","isToday","spring","toValue","tension","friction","useNativeDriver","start","disabledOpacity","timing","duration","todayString","locales","defaultLocale","charAt","toUpperCase","slice","todayButtonContainer","transform","translateY","todayButton","todayButtonStyle","todayButtonImage","todayButtonText","flex","children","renderTodayButton","displayName","propTypes","any","isRequired","onDateChanged","func","onMonthChange","bool","number","oneOfType","object","array"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, {Component} from 'react';\nimport {Animated, TouchableOpacity, View} from 'react-native';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\n\nimport dateutils from '../dateutils';\nimport {xdateToData} from '../interface';\nimport styleConstructor from './style';\nimport CalendarContext from './calendarContext';\n\n\nconst commons = require('./commons');\nconst UPDATE_SOURCES = commons.UPDATE_SOURCES;\nconst iconDown = require('../img/down.png');\nconst iconUp = require('../img/up.png');\nconst TOP_POSITION = 65;\n\n/**\n * @description: Calendar context provider component\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nclass CalendarProvider extends Component {\n  static displayName = 'CalendarProvider';\n\n  static propTypes = {\n    /** Initial date in 'yyyy-MM-dd' format. Default = Date() */\n    date: PropTypes.any.isRequired,\n    /** Callback for date change event */\n    onDateChanged: PropTypes.func,\n    /** Callback for month change event */\n    onMonthChange: PropTypes.func,\n    /** Whether to show the today button */\n    showTodayButton: PropTypes.bool,\n    /** Today button's top position */\n    todayBottomMargin: PropTypes.number,\n    /** Today button's style */\n    todayButtonStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    /** The opacity for the disabled today button (0-1) */\n    disabledOpacity: PropTypes.number\n  }\n\n  constructor(props) {\n    super(props);\n    this.style = styleConstructor(props.theme);\n\n    this.state = {\n      date: this.props.date || XDate().toString('yyyy-MM-dd'),\n      updateSource: UPDATE_SOURCES.CALENDAR_INIT,\n      buttonY: new Animated.Value(-props.todayBottomMargin || -TOP_POSITION),\n      buttonIcon: this.getButtonIcon(props.date),\n      disabled: false,\n      opacity: new Animated.Value(1)\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.date !== this.props.date) {\n      this.setDate(this.props.date, UPDATE_SOURCES.PROP_UPDATE);\n    }\n  }\n  \n  getProviderContextValue = () => {\n    return {\n      setDate: this.setDate,\n      date: this.state.date,\n      updateSource: this.state.updateSource,\n      setDisabled: this.setDisabled\n    };\n  };\n\n  setDate = (date, updateSource) => {\n    const sameMonth = dateutils.sameMonth(XDate(date), XDate(this.state.date));\n\n    this.setState({date, updateSource, buttonIcon: this.getButtonIcon(date)}, () => {\n      this.animateTodayButton(date);\n    });\n\n    _.invoke(this.props, 'onDateChanged', date, updateSource);\n    \n    if (!sameMonth) {\n      _.invoke(this.props, 'onMonthChange', xdateToData(XDate(date)), updateSource);\n    }\n  }\n\n  setDisabled = (disabled) => {\n    if (this.props.showTodayButton && disabled !== this.state.disabled) {\n      this.setState({disabled});\n      this.animateOpacity(disabled);\n    }\n  }\n\n  getButtonIcon(date) {\n    if (!this.props.showTodayButton) {\n      return;\n    }\n    const isPastDate = this.isPastDate(date);\n    return isPastDate ? iconDown : iconUp;\n  }\n\n  isPastDate(date) {\n    const today = XDate();\n    const d = XDate(date);\n\n    if (today.getFullYear() > d.getFullYear()) {\n      return true;\n    }\n    if (today.getFullYear() === d.getFullYear()) {\n      if (today.getMonth() > d.getMonth()) {\n        return true;\n      }\n      if (today.getMonth() === d.getMonth()) {\n        if (today.getDate() > d.getDate()) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  animateTodayButton(date) {\n    if (this.props.showTodayButton) {\n      const today = XDate().toString('yyyy-MM-dd');\n      const isToday = today === date;\n      \n      Animated.spring(this.state.buttonY, {\n        toValue: isToday ? TOP_POSITION : -this.props.todayBottomMargin || -TOP_POSITION,\n        tension: 30,\n        friction: 8,\n        useNativeDriver: true\n      }).start();\n    }\n  }\n\n  animateOpacity(disabled) {\n    const {disabledOpacity} = this.props;\n    if (disabledOpacity) {\n      Animated.timing(this.state.opacity, {\n        toValue: disabled ? disabledOpacity : 1, \n        duration: 500\n      }).start();\n    }\n  }\n\n  onTodayPress = () => {\n    const today = XDate().toString('yyyy-MM-dd');\n    this.setDate(today, UPDATE_SOURCES.TODAY_PRESS);\n  }\n\n  renderTodayButton() {\n    const {disabled, opacity, buttonY, buttonIcon} = this.state;\n    const todayString = XDate.locales[XDate.defaultLocale].today || commons.todayString;\n    const today = todayString.charAt(0).toUpperCase() + todayString.slice(1);\n    \n    return (\n      <Animated.View style={[this.style.todayButtonContainer, {transform: [{translateY: buttonY}]}]}>\n        <TouchableOpacity style={[this.style.todayButton, this.props.todayButtonStyle]} onPress={this.onTodayPress} disabled={disabled}>\n          <Animated.Image style={[this.style.todayButtonImage, {opacity}]} source={buttonIcon}/>\n          <Animated.Text allowFontScaling={false} style={[this.style.todayButtonText, {opacity}]}>{today}</Animated.Text>\n        </TouchableOpacity>\n      </Animated.View>\n    );\n  }\n  \n  render() {\n    return (\n      <CalendarContext.Provider value={this.getProviderContextValue()}>\n        <View style={[{flex: 1}, this.props.style]}>\n          {this.props.children}\n        </View>\n        {this.props.showTodayButton && this.renderTodayButton()}\n      </CalendarContext.Provider>\n    );\n  }\n}\n\nexport default CalendarProvider;\n"]},"metadata":{},"sourceType":"module"}