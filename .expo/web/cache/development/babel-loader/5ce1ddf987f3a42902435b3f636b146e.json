{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"F:\\\\MobileProjects\\\\ovuli\\\\node_modules\\\\react-native-calendars\\\\src\\\\calendar-list\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport { xdateToData, parseDate } from \"../interface\";\nimport styleConstructor from \"./style\";\nimport dateutils from \"../dateutils\";\nimport Calendar from \"../calendar\";\nimport CalendarListItem from \"./item\";\nimport CalendarHeader from \"../calendar/header/index\";\nimport { STATIC_HEADER } from \"../testIDs\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width;\n\nvar CalendarList = function (_Component) {\n  _inherits(CalendarList, _Component);\n\n  function CalendarList(props) {\n    var _this;\n\n    _classCallCheck(this, CalendarList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CalendarList).call(this, props));\n\n    _this.addMonth = function (count) {\n      _this.updateMonth(_this.state.currentMonth.clone().addMonths(count, true));\n    };\n\n    _this.style = styleConstructor(props.theme);\n    _this.viewabilityConfig = {\n      itemVisiblePercentThreshold: 20\n    };\n    var rows = [];\n    var texts = [];\n    var date = parseDate(props.current) || XDate();\n\n    for (var i = 0; i <= _this.props.pastScrollRange + _this.props.futureScrollRange; i++) {\n      var rangeDate = date.clone().addMonths(i - _this.props.pastScrollRange, true);\n      var rangeDateStr = rangeDate.toString('MMM yyyy');\n      texts.push(rangeDateStr);\n\n      if (_this.props.pastScrollRange - 1 <= i && i <= _this.props.pastScrollRange + 1 || !_this.props.pastScrollRange && i <= _this.props.pastScrollRange + 2) {\n        rows.push(rangeDate);\n      } else {\n        rows.push(rangeDateStr);\n      }\n    }\n\n    _this.state = {\n      rows: rows,\n      texts: texts,\n      openDate: date,\n      currentMonth: parseDate(props.current)\n    };\n    _this.onViewableItemsChangedBound = _this.onViewableItemsChanged.bind(_assertThisInitialized(_this));\n    _this.renderCalendarBound = _this.renderCalendar.bind(_assertThisInitialized(_this));\n    _this.getItemLayout = _this.getItemLayout.bind(_assertThisInitialized(_this));\n    _this.onLayout = _this.onLayout.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CalendarList, [{\n    key: \"onLayout\",\n    value: function onLayout(event) {\n      if (this.props.onLayout) {\n        this.props.onLayout(event);\n      }\n    }\n  }, {\n    key: \"scrollToDay\",\n    value: function scrollToDay(d, offset, animated) {\n      var day = parseDate(d);\n      var diffMonths = Math.round(this.state.openDate.clone().setDate(1).diffMonths(day.clone().setDate(1)));\n      var size = this.props.horizontal ? this.props.calendarWidth : this.props.calendarHeight;\n      var scrollAmount = size * this.props.pastScrollRange + diffMonths * size + (offset || 0);\n\n      if (!this.props.horizontal) {\n        var week = 0;\n        var days = dateutils.page(day, this.props.firstDay);\n\n        for (var i = 0; i < days.length; i++) {\n          week = Math.floor(i / 7);\n\n          if (dateutils.sameDate(days[i], day)) {\n            scrollAmount += 46 * week;\n            break;\n          }\n        }\n      }\n\n      this.listView.scrollToOffset({\n        offset: scrollAmount,\n        animated: animated\n      });\n    }\n  }, {\n    key: \"scrollToMonth\",\n    value: function scrollToMonth(m) {\n      var month = parseDate(m);\n      var scrollTo = month || this.state.openDate;\n      var diffMonths = Math.round(this.state.openDate.clone().setDate(1).diffMonths(scrollTo.clone().setDate(1)));\n      var size = this.props.horizontal ? this.props.calendarWidth : this.props.calendarHeight;\n      var scrollAmount = size * this.props.pastScrollRange + diffMonths * size;\n      this.listView.scrollToOffset({\n        offset: scrollAmount,\n        animated: false\n      });\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(props) {\n      var current = parseDate(this.props.current);\n      var nextCurrent = parseDate(props.current);\n\n      if (nextCurrent && current && nextCurrent.getTime() !== current.getTime()) {\n        this.scrollToMonth(nextCurrent);\n      }\n\n      var rowclone = this.state.rows;\n      var newrows = [];\n\n      for (var i = 0; i < rowclone.length; i++) {\n        var val = this.state.texts[i];\n\n        if (rowclone[i].getTime) {\n          val = rowclone[i].clone();\n          val.propbump = rowclone[i].propbump ? rowclone[i].propbump + 1 : 1;\n        }\n\n        newrows.push(val);\n      }\n\n      this.setState({\n        rows: newrows\n      });\n    }\n  }, {\n    key: \"onViewableItemsChanged\",\n    value: function onViewableItemsChanged(_ref) {\n      var viewableItems = _ref.viewableItems;\n\n      function rowIsCloseToViewable(index, distance) {\n        for (var i = 0; i < viewableItems.length; i++) {\n          if (Math.abs(index - parseInt(viewableItems[i].index)) <= distance) {\n            return true;\n          }\n        }\n\n        return false;\n      }\n\n      var rowclone = this.state.rows;\n      var newrows = [];\n      var visibleMonths = [];\n\n      for (var i = 0; i < rowclone.length; i++) {\n        var val = rowclone[i];\n        var rowShouldBeRendered = rowIsCloseToViewable(i, 1);\n\n        if (rowShouldBeRendered && !rowclone[i].getTime) {\n          val = this.state.openDate.clone().addMonths(i - this.props.pastScrollRange, true);\n        } else if (!rowShouldBeRendered) {\n          val = this.state.texts[i];\n        }\n\n        newrows.push(val);\n\n        if (rowIsCloseToViewable(i, 0)) {\n          visibleMonths.push(xdateToData(val));\n        }\n      }\n\n      if (this.props.onVisibleMonthsChange) {\n        this.props.onVisibleMonthsChange(visibleMonths);\n      }\n\n      this.setState({\n        rows: newrows,\n        currentMonth: parseDate(visibleMonths[0])\n      });\n    }\n  }, {\n    key: \"renderCalendar\",\n    value: function renderCalendar(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(CalendarListItem, _extends({\n        scrollToMonth: this.scrollToMonth.bind(this),\n        item: item,\n        calendarHeight: this.props.calendarHeight,\n        calendarWidth: this.props.horizontal ? this.props.calendarWidth : undefined\n      }, this.props, {\n        style: this.props.calendarStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        }\n      }));\n    }\n  }, {\n    key: \"getItemLayout\",\n    value: function getItemLayout(data, index) {\n      return {\n        length: this.props.horizontal ? this.props.calendarWidth : this.props.calendarHeight,\n        offset: (this.props.horizontal ? this.props.calendarWidth : this.props.calendarHeight) * index,\n        index: index\n      };\n    }\n  }, {\n    key: \"getMonthIndex\",\n    value: function getMonthIndex(month) {\n      var diffMonths = this.state.openDate.diffMonths(month) + this.props.pastScrollRange;\n      return diffMonths;\n    }\n  }, {\n    key: \"updateMonth\",\n    value: function updateMonth(day, doNotTriggerListeners) {\n      var _this2 = this;\n\n      if (day.toString('yyyy MM') === this.state.currentMonth.toString('yyyy MM')) {\n        return;\n      }\n\n      this.setState({\n        currentMonth: day.clone()\n      }, function () {\n        _this2.scrollToMonth(_this2.state.currentMonth);\n\n        if (!doNotTriggerListeners) {\n          var currMont = _this2.state.currentMonth.clone();\n\n          if (_this2.props.onMonthChange) {\n            _this2.props.onMonthChange(xdateToData(currMont));\n          }\n\n          if (_this2.props.onVisibleMonthsChange) {\n            _this2.props.onVisibleMonthsChange([xdateToData(currMont)]);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"renderStaticHeader\",\n    value: function renderStaticHeader() {\n      var _this$props = this.props,\n          staticHeader = _this$props.staticHeader,\n          horizontal = _this$props.horizontal;\n      var useStaticHeader = staticHeader && horizontal;\n\n      if (useStaticHeader) {\n        var indicator;\n\n        if (this.props.showIndicator) {\n          indicator = React.createElement(ActivityIndicator, {\n            color: this.props.theme && this.props.theme.indicatorColor,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 268\n            }\n          });\n        }\n\n        return React.createElement(CalendarHeader, {\n          style: [this.style.staticHeader, this.props.headerStyle],\n          month: this.state.currentMonth,\n          addMonth: this.addMonth,\n          showIndicator: indicator,\n          theme: this.props.theme,\n          hideArrows: this.props.hideArrows,\n          firstDay: this.props.firstDay,\n          renderArrow: this.props.renderArrow,\n          monthFormat: this.props.monthFormat,\n          hideDayNames: this.props.hideDayNames,\n          weekNumbers: this.props.showWeekNumbers,\n          onPressArrowLeft: this.props.onPressArrowLeft,\n          onPressArrowRight: this.props.onPressArrowRight,\n          testID: STATIC_HEADER,\n          accessibilityElementsHidden: true,\n          importantForAccessibility: 'no-hide-descendants',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        }\n      }, React.createElement(FlatList, {\n        onLayout: this.onLayout,\n        ref: function ref(c) {\n          return _this3.listView = c;\n        },\n        style: [this.style.container, this.props.style],\n        initialListSize: this.props.pastScrollRange + this.props.futureScrollRange + 1,\n        data: this.state.rows,\n        removeClippedSubviews: this.props.removeClippedSubviews,\n        pageSize: 1,\n        horizontal: this.props.horizontal,\n        pagingEnabled: this.props.pagingEnabled,\n        onViewableItemsChanged: this.onViewableItemsChangedBound,\n        viewabilityConfig: this.viewabilityConfig,\n        renderItem: this.renderCalendarBound,\n        showsVerticalScrollIndicator: this.props.showScrollIndicator,\n        showsHorizontalScrollIndicator: this.props.showScrollIndicator,\n        scrollEnabled: this.props.scrollEnabled,\n        keyExtractor: this.props.keyExtractor,\n        initialScrollIndex: this.state.openDate ? this.getMonthIndex(this.state.openDate) : false,\n        getItemLayout: this.getItemLayout,\n        scrollsToTop: this.props.scrollsToTop,\n        onEndReachedThreshold: this.props.onEndReachedThreshold,\n        onEndReached: this.props.onEndReached,\n        keyboardShouldPersistTaps: this.props.keyboardShouldPersistTaps,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        }\n      }), this.renderStaticHeader());\n    }\n  }]);\n\n  return CalendarList;\n}(Component);\n\nCalendarList.displayName = 'CalendarList';\nCalendarList.propTypes = _objectSpread({}, Calendar.propTypes, {\n  pastScrollRange: PropTypes.number,\n  futureScrollRange: PropTypes.number,\n  scrollEnabled: PropTypes.bool,\n  showScrollIndicator: PropTypes.bool,\n  scrollsToTop: PropTypes.bool,\n  pagingEnabled: PropTypes.bool,\n  horizontal: PropTypes.bool,\n  calendarWidth: PropTypes.number,\n  calendarHeight: PropTypes.number,\n  keyboardShouldPersistTaps: PropTypes.oneOf(['never', 'always', 'handled']),\n  calendarStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n  staticHeader: PropTypes.bool,\n  keyExtractor: PropTypes.func\n});\nCalendarList.defaultProps = {\n  horizontal: false,\n  calendarWidth: width,\n  calendarHeight: 360,\n  pastScrollRange: 50,\n  futureScrollRange: 50,\n  showScrollIndicator: false,\n  scrollEnabled: true,\n  scrollsToTop: false,\n  removeClippedSubviews: Platform.OS === 'android' ? false : true,\n  keyExtractor: function keyExtractor(item, index) {\n    return String(index);\n  }\n};\nexport default CalendarList;","map":{"version":3,"sources":["F:/MobileProjects/ovuli/node_modules/react-native-calendars/src/calendar-list/index.js"],"names":["React","Component","PropTypes","XDate","xdateToData","parseDate","styleConstructor","dateutils","Calendar","CalendarListItem","CalendarHeader","STATIC_HEADER","Dimensions","get","width","CalendarList","props","addMonth","count","updateMonth","state","currentMonth","clone","addMonths","style","theme","viewabilityConfig","itemVisiblePercentThreshold","rows","texts","date","current","i","pastScrollRange","futureScrollRange","rangeDate","rangeDateStr","toString","push","openDate","onViewableItemsChangedBound","onViewableItemsChanged","bind","renderCalendarBound","renderCalendar","getItemLayout","onLayout","event","d","offset","animated","day","diffMonths","Math","round","setDate","size","horizontal","calendarWidth","calendarHeight","scrollAmount","week","days","page","firstDay","length","floor","sameDate","listView","scrollToOffset","m","month","scrollTo","nextCurrent","getTime","scrollToMonth","rowclone","newrows","val","propbump","setState","viewableItems","rowIsCloseToViewable","index","distance","abs","parseInt","visibleMonths","rowShouldBeRendered","onVisibleMonthsChange","item","undefined","calendarStyle","data","doNotTriggerListeners","currMont","onMonthChange","staticHeader","useStaticHeader","indicator","showIndicator","indicatorColor","headerStyle","hideArrows","renderArrow","monthFormat","hideDayNames","showWeekNumbers","onPressArrowLeft","onPressArrowRight","c","container","removeClippedSubviews","pagingEnabled","showScrollIndicator","scrollEnabled","keyExtractor","getMonthIndex","scrollsToTop","onEndReachedThreshold","onEndReached","keyboardShouldPersistTaps","renderStaticHeader","displayName","propTypes","number","bool","oneOf","oneOfType","object","array","func","defaultProps","Platform","OS","String"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {FlatList, Platform, Dimensions, ActivityIndicator, View} from 'react-native';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\n\nimport {xdateToData, parseDate} from '../interface';\nimport styleConstructor from './style';\nimport dateutils from '../dateutils';\nimport Calendar from '../calendar';\nimport CalendarListItem from './item';\nimport CalendarHeader from '../calendar/header/index';\nimport {STATIC_HEADER} from '../testIDs';\n\n\nconst {width} = Dimensions.get('window');\n\n/**\n * @description: Calendar List component for both vertical and horizontal calendars\n * @extends: Calendar\n * @extendslink: docs/Calendar\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/calendarsList.js\n * @gif: https://github.com/wix/react-native-calendars/blob/master/demo/calendar-list.gif\n */\nclass CalendarList extends Component {\n  static displayName = 'CalendarList';\n\n  static propTypes = {\n    ...Calendar.propTypes,\n    /** Max amount of months allowed to scroll to the past. Default = 50 */\n    pastScrollRange: PropTypes.number,\n    /** Max amount of months allowed to scroll to the future. Default = 50 */\n    futureScrollRange: PropTypes.number,\n    /** Enable or disable scrolling of calendar list */\n    scrollEnabled: PropTypes.bool,\n    /** Enable or disable vertical scroll indicator. Default = false */\n    showScrollIndicator: PropTypes.bool,\n    /** When true, the calendar list scrolls to top when the status bar is tapped. Default = true */\n    scrollsToTop: PropTypes.bool,\n    /** Enable or disable paging on scroll */\n    pagingEnabled: PropTypes.bool,\n    /** Whether the scroll is horizontal */\n    horizontal: PropTypes.bool,\n    /** Used when calendar scroll is horizontal, default is device width, pagination should be disabled */\n    calendarWidth: PropTypes.number,\n    /** Dynamic calendar height */\n    calendarHeight: PropTypes.number,\n    /** Should Keyboard persist taps */\n    keyboardShouldPersistTaps: PropTypes.oneOf(['never', 'always', 'handled']),\n    /** Style for the List item (the calendar) */\n    calendarStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    /** Whether to use static header that will not scroll with the list (horizontal only) */\n    staticHeader: PropTypes.bool,\n    /** A custom key extractor for the generated calendar months */\n    keyExtractor: PropTypes.func\n  }\n\n  static defaultProps = {\n    horizontal: false,\n    calendarWidth: width,\n    calendarHeight: 360,\n    pastScrollRange: 50,\n    futureScrollRange: 50,\n    showScrollIndicator: false,\n    scrollEnabled: true,\n    scrollsToTop: false,\n    removeClippedSubviews: Platform.OS === 'android' ? false : true,\n    keyExtractor: (item, index) => String(index)\n  }\n\n  constructor(props) {\n    super(props);\n    \n    this.style = styleConstructor(props.theme);\n    \n    this.viewabilityConfig = {\n      itemVisiblePercentThreshold: 20\n    };\n\n    const rows = [];\n    const texts = [];\n    const date = parseDate(props.current) || XDate();\n    \n    for (let i = 0; i <= this.props.pastScrollRange + this.props.futureScrollRange; i++) {\n      const rangeDate = date.clone().addMonths(i - this.props.pastScrollRange, true);\n      const rangeDateStr = rangeDate.toString('MMM yyyy');\n      texts.push(rangeDateStr);\n      /*\n       * This selects range around current shown month [-0, +2] or [-1, +1] month for detail calendar rendering.\n       * If `this.pastScrollRange` is `undefined` it's equal to `false` or 0 in next condition.\n       */\n      if (this.props.pastScrollRange - 1 <= i && i <= this.props.pastScrollRange + 1 || !this.props.pastScrollRange && i <= this.props.pastScrollRange + 2) {\n        rows.push(rangeDate);\n      } else {\n        rows.push(rangeDateStr);\n      }\n    }\n\n    this.state = {\n      rows,\n      texts,\n      openDate: date,\n      currentMonth: parseDate(props.current)\n    };\n\n    this.onViewableItemsChangedBound = this.onViewableItemsChanged.bind(this);\n    this.renderCalendarBound = this.renderCalendar.bind(this);\n    this.getItemLayout = this.getItemLayout.bind(this);\n    this.onLayout = this.onLayout.bind(this);\n  }\n\n  onLayout(event) {\n    if (this.props.onLayout) {\n      this.props.onLayout(event);\n    }\n  }\n\n  scrollToDay(d, offset, animated) {\n    const day = parseDate(d);\n    const diffMonths = Math.round(this.state.openDate.clone().setDate(1).diffMonths(day.clone().setDate(1)));\n    const size = this.props.horizontal ? this.props.calendarWidth : this.props.calendarHeight;\n    let scrollAmount = (size * this.props.pastScrollRange) + (diffMonths * size) + (offset || 0);\n    \n    if (!this.props.horizontal) {\n      let week = 0;\n      const days = dateutils.page(day, this.props.firstDay);\n      for (let i = 0; i < days.length; i++) {\n        week = Math.floor(i / 7);\n        if (dateutils.sameDate(days[i], day)) {\n          scrollAmount += 46 * week;\n          break;\n        }\n      }\n    }\n    this.listView.scrollToOffset({offset: scrollAmount, animated});\n  }\n\n  scrollToMonth(m) {\n    const month = parseDate(m);\n    const scrollTo = month || this.state.openDate;\n    let diffMonths = Math.round(this.state.openDate.clone().setDate(1).diffMonths(scrollTo.clone().setDate(1)));\n    const size = this.props.horizontal ? this.props.calendarWidth : this.props.calendarHeight;\n    const scrollAmount = (size * this.props.pastScrollRange) + (diffMonths * size);\n\n    this.listView.scrollToOffset({offset: scrollAmount, animated: false});\n  }\n\n  UNSAFE_componentWillReceiveProps(props) {\n    const current = parseDate(this.props.current);\n    const nextCurrent = parseDate(props.current);\n    \n    if (nextCurrent && current && nextCurrent.getTime() !== current.getTime()) {\n      this.scrollToMonth(nextCurrent);\n    }\n\n    const rowclone = this.state.rows;\n    const newrows = [];\n    \n    for (let i = 0; i < rowclone.length; i++) {\n      let val = this.state.texts[i];\n      if (rowclone[i].getTime) {\n        val = rowclone[i].clone();\n        val.propbump = rowclone[i].propbump ? rowclone[i].propbump + 1 : 1;\n      }\n      newrows.push(val);\n    }\n    this.setState({\n      rows: newrows\n    });\n  }\n\n  onViewableItemsChanged({viewableItems}) {\n    function rowIsCloseToViewable(index, distance) {\n      for (let i = 0; i < viewableItems.length; i++) {\n        if (Math.abs(index - parseInt(viewableItems[i].index)) <= distance) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    const rowclone = this.state.rows;\n    const newrows = [];\n    const visibleMonths = [];\n    \n    for (let i = 0; i < rowclone.length; i++) {\n      let val = rowclone[i];\n      const rowShouldBeRendered = rowIsCloseToViewable(i, 1);\n      \n      if (rowShouldBeRendered && !rowclone[i].getTime) {\n        val = this.state.openDate.clone().addMonths(i - this.props.pastScrollRange, true);\n      } else if (!rowShouldBeRendered) {\n        val = this.state.texts[i];\n      }\n      newrows.push(val);\n      if (rowIsCloseToViewable(i, 0)) {\n        visibleMonths.push(xdateToData(val));\n      }\n    }\n    \n    if (this.props.onVisibleMonthsChange) {\n      this.props.onVisibleMonthsChange(visibleMonths);\n    }\n\n    this.setState({\n      rows: newrows,\n      currentMonth: parseDate(visibleMonths[0])\n    });\n  }\n\n  renderCalendar({item}) {\n    return (\n      <CalendarListItem\n        scrollToMonth={this.scrollToMonth.bind(this)}\n        item={item} \n        calendarHeight={this.props.calendarHeight} \n        calendarWidth={this.props.horizontal ? this.props.calendarWidth : undefined} \n        {...this.props} \n        style={this.props.calendarStyle}\n      />\n    );\n  }\n\n  getItemLayout(data, index) {\n    return {\n      length: this.props.horizontal ? this.props.calendarWidth : this.props.calendarHeight, \n      offset: (this.props.horizontal ? this.props.calendarWidth : this.props.calendarHeight) * index, index\n    };\n  }\n\n  getMonthIndex(month) {\n    let diffMonths = this.state.openDate.diffMonths(month) + this.props.pastScrollRange;\n    return diffMonths;\n  }\n\n  addMonth = (count) => {\n    this.updateMonth(this.state.currentMonth.clone().addMonths(count, true));\n  }\n\n  updateMonth(day, doNotTriggerListeners) {\n    if (day.toString('yyyy MM') === this.state.currentMonth.toString('yyyy MM')) {\n      return;\n    }\n\n    this.setState({\n      currentMonth: day.clone()\n    }, () => {\n      this.scrollToMonth(this.state.currentMonth);\n      \n      if (!doNotTriggerListeners) {\n        const currMont = this.state.currentMonth.clone();\n        if (this.props.onMonthChange) {\n          this.props.onMonthChange(xdateToData(currMont));\n        }\n        if (this.props.onVisibleMonthsChange) {\n          this.props.onVisibleMonthsChange([xdateToData(currMont)]);\n        }\n      }\n    });\n  }\n\n  renderStaticHeader() {\n    const {staticHeader, horizontal} = this.props;\n    const useStaticHeader = staticHeader && horizontal;\n    \n    if (useStaticHeader) {\n      let indicator;\n      if (this.props.showIndicator) {\n        indicator = <ActivityIndicator color={this.props.theme && this.props.theme.indicatorColor}/>;\n      }\n\n      return (\n        <CalendarHeader\n          style={[this.style.staticHeader, this.props.headerStyle]}\n          month={this.state.currentMonth}\n          addMonth={this.addMonth}\n          showIndicator={indicator}\n          theme={this.props.theme}\n          hideArrows={this.props.hideArrows}\n          firstDay={this.props.firstDay}\n          renderArrow={this.props.renderArrow}\n          monthFormat={this.props.monthFormat}\n          hideDayNames={this.props.hideDayNames}\n          weekNumbers={this.props.showWeekNumbers}\n          onPressArrowLeft={this.props.onPressArrowLeft}\n          onPressArrowRight={this.props.onPressArrowRight}\n          testID={STATIC_HEADER}\n          accessibilityElementsHidden={true} // iOS\n          importantForAccessibility={'no-hide-descendants'} // Android\n        />\n      );\n    }\n  }\n\n  render() {\n    return (\n      <View>\n        <FlatList\n          onLayout={this.onLayout}\n          ref={(c) => this.listView = c}\n          //scrollEventThrottle={1000}\n          style={[this.style.container, this.props.style]}\n          initialListSize={this.props.pastScrollRange + this.props.futureScrollRange + 1} // ListView deprecated\n          data={this.state.rows}\n          //snapToAlignment='start'\n          //snapToInterval={this.calendarHeight}\n          removeClippedSubviews={this.props.removeClippedSubviews}\n          pageSize={1} // ListView deprecated\n          horizontal={this.props.horizontal}\n          pagingEnabled={this.props.pagingEnabled}\n          onViewableItemsChanged={this.onViewableItemsChangedBound}\n          viewabilityConfig={this.viewabilityConfig}\n          renderItem={this.renderCalendarBound}\n          showsVerticalScrollIndicator={this.props.showScrollIndicator}\n          showsHorizontalScrollIndicator={this.props.showScrollIndicator}\n          scrollEnabled={this.props.scrollEnabled}\n          keyExtractor={this.props.keyExtractor}\n          initialScrollIndex={this.state.openDate ? this.getMonthIndex(this.state.openDate) : false}\n          getItemLayout={this.getItemLayout}\n          scrollsToTop={this.props.scrollsToTop}\n          onEndReachedThreshold={this.props.onEndReachedThreshold}\n          onEndReached={this.props.onEndReached}\n          keyboardShouldPersistTaps={this.props.keyboardShouldPersistTaps}\n        />\n        {this.renderStaticHeader()}\n      </View>\n    );\n  }\n}\n\nexport default CalendarList;\n"]},"metadata":{},"sourceType":"module"}