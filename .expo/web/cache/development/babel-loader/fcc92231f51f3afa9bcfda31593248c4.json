{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"F:\\\\MobileProjects\\\\ovuli\\\\node_modules\\\\react-native-calendars\\\\src\\\\expandableCalendar\\\\weekCalendar.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport styleConstructor from \"./style\";\nimport CalendarList from \"../calendar-list\";\nimport Week from \"../expandableCalendar/week\";\nimport asCalendarConsumer from \"./asCalendarConsumer\";\nimport { weekDayNames } from \"../dateutils\";\n\nvar commons = require(\"./commons\");\n\nvar UPDATE_SOURCES = commons.UPDATE_SOURCES;\nvar NUMBER_OF_PAGES = 2;\n\nvar WeekCalendar = function (_Component) {\n  _inherits(WeekCalendar, _Component);\n\n  function WeekCalendar(props) {\n    var _this;\n\n    _classCallCheck(this, WeekCalendar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WeekCalendar).call(this, props));\n\n    _this.onDayPress = function (value) {\n      _.invoke(_this.props.context, 'setDate', value.dateString, UPDATE_SOURCES.DAY_PRESS);\n    };\n\n    _this.onScroll = function (_ref) {\n      var x = _ref.nativeEvent.contentOffset.x;\n      var newPage = Math.round(x / _this.containerWidth);\n\n      if (_this.page !== newPage) {\n        var items = _this.state.items;\n        _this.page = newPage;\n\n        _.invoke(_this.props.context, 'setDate', items[_this.page], UPDATE_SOURCES.WEEK_SCROLL);\n\n        if (_this.page === items.length - 1) {\n          for (var i = 0; i <= NUMBER_OF_PAGES; i++) {\n            items[i] = items[i + NUMBER_OF_PAGES];\n          }\n\n          _this.setState({\n            items: _toConsumableArray(items)\n          });\n        } else if (_this.page === 0) {\n          for (var _i = items.length - 1; _i >= NUMBER_OF_PAGES; _i--) {\n            items[_i] = items[_i - NUMBER_OF_PAGES];\n          }\n\n          _this.setState({\n            items: _toConsumableArray(items)\n          });\n        }\n      }\n    };\n\n    _this.onMomentumScrollEnd = function () {\n      var items = _this.state.items;\n      var isFirstPage = _this.page === 0;\n      var isLastPage = _this.page === items.length - 1;\n\n      if (isFirstPage || isLastPage) {\n        _this.list.current.scrollToIndex({\n          animated: false,\n          index: NUMBER_OF_PAGES\n        });\n\n        _this.page = NUMBER_OF_PAGES;\n\n        var newWeekArray = _this.getDatesArray();\n\n        if (isLastPage) {\n          for (var i = NUMBER_OF_PAGES + 1; i < items.length; i++) {\n            items[i] = newWeekArray[i];\n          }\n        } else {\n          for (var _i2 = 0; _i2 < NUMBER_OF_PAGES; _i2++) {\n            items[_i2] = newWeekArray[_i2];\n          }\n        }\n\n        setTimeout(function () {\n          _this.setState({\n            items: _toConsumableArray(items)\n          });\n        }, 100);\n      }\n    };\n\n    _this.renderItem = function (_ref2) {\n      var item = _ref2.item;\n\n      var _this$props = _this.props,\n          calendarWidth = _this$props.calendarWidth,\n          style = _this$props.style,\n          onDayPress = _this$props.onDayPress,\n          others = _objectWithoutProperties(_this$props, [\"calendarWidth\", \"style\", \"onDayPress\"]);\n\n      return React.createElement(Week, _extends({}, others, {\n        key: item,\n        current: item,\n        style: [{\n          width: calendarWidth || _this.containerWidth\n        }, style],\n        markedDates: _this.getMarkedDates(),\n        onDayPress: onDayPress || _this.onDayPress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        }\n      }));\n    };\n\n    _this.getItemLayout = function (data, index) {\n      return {\n        length: _this.containerWidth,\n        offset: _this.containerWidth * index,\n        index: index\n      };\n    };\n\n    _this.keyExtractor = function (item, index) {\n      return index.toString();\n    };\n\n    _this.style = styleConstructor(props.theme);\n    _this.list = React.createRef();\n    _this.page = NUMBER_OF_PAGES;\n    _this.state = {\n      items: _this.getDatesArray()\n    };\n    return _this;\n  }\n\n  _createClass(WeekCalendar, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props$context = this.props.context,\n          updateSource = _this$props$context.updateSource,\n          date = _this$props$context.date;\n\n      if (date !== prevProps.context.date && updateSource !== UPDATE_SOURCES.WEEK_SCROLL) {\n        this.setState({\n          items: this.getDatesArray()\n        });\n        this.list.current.scrollToIndex({\n          animated: false,\n          index: NUMBER_OF_PAGES\n        });\n      }\n    }\n  }, {\n    key: \"getDatesArray\",\n    value: function getDatesArray() {\n      var array = [];\n\n      for (var index = -NUMBER_OF_PAGES; index <= NUMBER_OF_PAGES; index++) {\n        var d = this.getDate(index);\n        array.push(d);\n      }\n\n      return array;\n    }\n  }, {\n    key: \"getDate\",\n    value: function getDate(weekIndex) {\n      var _this$props2 = this.props,\n          current = _this$props2.current,\n          context = _this$props2.context,\n          firstDay = _this$props2.firstDay;\n      var d = XDate(current || context.date);\n      var dayOfTheWeek = d.getDay();\n\n      if (dayOfTheWeek < firstDay && firstDay > 0) {\n        dayOfTheWeek = 7 + dayOfTheWeek;\n      }\n\n      var dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n      var newDate = dd.addWeeks(weekIndex);\n      var dateString = newDate.toString('yyyy-MM-dd');\n      return dateString;\n    }\n  }, {\n    key: \"getMarkedDates\",\n    value: function getMarkedDates() {\n      var _this$props3 = this.props,\n          context = _this$props3.context,\n          markedDates = _this$props3.markedDates;\n\n      if (markedDates) {\n        var marked = _.cloneDeep(markedDates);\n\n        if (marked[context.date]) {\n          marked[context.date].selected = true;\n        } else {\n          marked[context.date] = {\n            selected: true\n          };\n        }\n\n        return marked;\n      }\n\n      return _defineProperty({}, context.date, {\n        selected: true\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          allowShadow = _this$props4.allowShadow,\n          firstDay = _this$props4.firstDay,\n          hideDayNames = _this$props4.hideDayNames;\n      var items = this.state.items;\n      var weekDaysNames = weekDayNames(firstDay);\n      return React.createElement(View, {\n        style: [allowShadow && this.style.containerShadow, !hideDayNames && {\n          paddingBottom: 6\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        }\n      }, !hideDayNames && React.createElement(View, {\n        style: [this.style.week, {\n          marginTop: 12,\n          marginBottom: -2\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        }\n      }, weekDaysNames.map(function (day, idx) {\n        return React.createElement(Text, {\n          allowFontScaling: false,\n          key: idx,\n          style: _this2.style.dayHeader,\n          numberOfLines: 1,\n          accessibilityLabel: '',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          }\n        }, day);\n      })), React.createElement(FlatList, {\n        ref: this.list,\n        data: items,\n        extraData: this.props.current || this.props.context.date,\n        style: this.style.container,\n        horizontal: true,\n        showsHorizontalScrollIndicator: false,\n        pagingEnabled: true,\n        scrollEnabled: true,\n        renderItem: this.renderItem,\n        keyExtractor: this.keyExtractor,\n        initialScrollIndex: NUMBER_OF_PAGES,\n        getItemLayout: this.getItemLayout,\n        onScroll: this.onScroll,\n        onMomentumScrollEnd: this.onMomentumScrollEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        }\n      }));\n    }\n  }, {\n    key: \"containerWidth\",\n    get: function get() {\n      return this.props.calendarWidth || commons.screenWidth;\n    }\n  }]);\n\n  return WeekCalendar;\n}(Component);\n\nWeekCalendar.displayName = 'WeekCalendar';\nWeekCalendar.propTypes = _objectSpread({}, CalendarList.propTypes, {\n  current: PropTypes.any,\n  allowShadow: PropTypes.bool,\n  hideDayNames: PropTypes.bool\n});\nWeekCalendar.defaultProps = {\n  firstDay: 0,\n  allowShadow: true\n};\nexport default asCalendarConsumer(WeekCalendar);","map":{"version":3,"sources":["F:/MobileProjects/ovuli/node_modules/react-native-calendars/src/expandableCalendar/weekCalendar.js"],"names":["_","React","Component","PropTypes","XDate","styleConstructor","CalendarList","Week","asCalendarConsumer","weekDayNames","commons","require","UPDATE_SOURCES","NUMBER_OF_PAGES","WeekCalendar","props","onDayPress","value","invoke","context","dateString","DAY_PRESS","onScroll","x","nativeEvent","contentOffset","newPage","Math","round","containerWidth","page","items","state","WEEK_SCROLL","length","i","setState","onMomentumScrollEnd","isFirstPage","isLastPage","list","current","scrollToIndex","animated","index","newWeekArray","getDatesArray","setTimeout","renderItem","item","calendarWidth","style","others","width","getMarkedDates","getItemLayout","data","offset","keyExtractor","toString","theme","createRef","prevProps","updateSource","date","array","d","getDate","push","weekIndex","firstDay","dayOfTheWeek","getDay","dd","addDays","newDate","addWeeks","markedDates","marked","cloneDeep","selected","allowShadow","hideDayNames","weekDaysNames","containerShadow","paddingBottom","week","marginTop","marginBottom","map","day","idx","dayHeader","container","screenWidth","displayName","propTypes","any","bool","defaultProps"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, {Component} from 'react';\nimport {FlatList, View, Text} from 'react-native';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\n\nimport styleConstructor from './style';\nimport CalendarList from '../calendar-list';\nimport Week from '../expandableCalendar/week';\nimport asCalendarConsumer from './asCalendarConsumer';\nimport {weekDayNames} from '../dateutils';\n\n\nconst commons = require('./commons');\nconst UPDATE_SOURCES = commons.UPDATE_SOURCES;\nconst NUMBER_OF_PAGES = 2; // must be a positive number\n\n/**\n * @description: Week calendar component\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nclass WeekCalendar extends Component {\n  static displayName = 'WeekCalendar';\n\n  static propTypes = {\n    ...CalendarList.propTypes,\n    // the current date\n    current: PropTypes.any,\n    /** whether to have shadow/elevation for the calendar */\n    allowShadow: PropTypes.bool,\n    /** whether to hide the names of the week days */\n    hideDayNames: PropTypes.bool\n  };\n\n  static defaultProps = {\n    firstDay: 0,\n    allowShadow: true\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.style = styleConstructor(props.theme);\n\n    this.list = React.createRef();\n    this.page = NUMBER_OF_PAGES;\n\n    this.state = {\n      items: this.getDatesArray()\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const {updateSource, date} = this.props.context;\n    \n    if (date !== prevProps.context.date && updateSource !== UPDATE_SOURCES.WEEK_SCROLL) {\n      this.setState({items: this.getDatesArray()});\n      this.list.current.scrollToIndex({animated: false, index: NUMBER_OF_PAGES});\n    }\n  }\n\n  get containerWidth() {\n    return this.props.calendarWidth || commons.screenWidth;\n  }\n\n  getDatesArray() {\n    const array = [];\n    for (let index = -NUMBER_OF_PAGES; index <= NUMBER_OF_PAGES; index++) {\n      const d = this.getDate(index);\n      array.push(d);\n    }\n    return array;\n  }\n\n  getDate(weekIndex) {\n    const {current, context, firstDay} = this.props;\n    const d = XDate(current || context.date);\n    // get the first day of the week as date (for the on scroll mark)\n    let dayOfTheWeek = d.getDay();\n    if (dayOfTheWeek < firstDay && firstDay > 0) {\n      dayOfTheWeek = 7 + dayOfTheWeek;\n    }\n\n    // leave the current date in the visible week as is\n    const dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n    const newDate = dd.addWeeks(weekIndex);\n    const dateString = newDate.toString('yyyy-MM-dd');\n    \n    return dateString;\n  }\n\n  getMarkedDates() {\n    const {context, markedDates} = this.props;\n\n    if (markedDates) {\n      const marked = _.cloneDeep(markedDates);\n\n      if (marked[context.date]) {\n        marked[context.date].selected = true;\n      } else {\n        marked[context.date] = {selected: true};\n      }\n      return marked;\n    } \n    return {[context.date]: {selected: true}};\n  }\n\n  onDayPress = (value) => {\n    _.invoke(this.props.context, 'setDate', value.dateString, UPDATE_SOURCES.DAY_PRESS);\n  }\n\n  onScroll = ({nativeEvent: {contentOffset: {x}}}) => {\n    const newPage = Math.round(x / this.containerWidth);\n    \n    if (this.page !== newPage) {\n      const {items} = this.state;\n      this.page = newPage;\n\n      _.invoke(this.props.context, 'setDate', items[this.page], UPDATE_SOURCES.WEEK_SCROLL);\n\n      if (this.page === items.length - 1) {\n        for (let i = 0; i <= NUMBER_OF_PAGES; i++) {\n          items[i] = items[i + NUMBER_OF_PAGES];\n        }\n        this.setState({items: [...items]});\n      } else if (this.page === 0) {\n        for (let i = items.length - 1; i >= NUMBER_OF_PAGES; i--) {\n          items[i] = items[i - NUMBER_OF_PAGES];\n        }\n        this.setState({items: [...items]});\n      }\n    }\n  }\n\n  onMomentumScrollEnd = () => {\n    const {items} = this.state;\n    const isFirstPage = this.page === 0;\n    const isLastPage = this.page === items.length - 1;\n\n    if (isFirstPage || isLastPage) {\n      this.list.current.scrollToIndex({animated: false, index: NUMBER_OF_PAGES});\n      this.page = NUMBER_OF_PAGES;\n      const newWeekArray = this.getDatesArray();\n\n      if (isLastPage) {\n        for (let i = NUMBER_OF_PAGES + 1; i < items.length; i++) {\n          items[i] = newWeekArray[i];\n        }\n      } else {\n        for (let i = 0; i < NUMBER_OF_PAGES; i++) {\n          items[i] = newWeekArray[i];\n        }\n      }\n\n      setTimeout(() => {\n        this.setState({items: [...items]});\n      }, 100);\n    }\n  }\n\n  renderItem = ({item}) => {\n    const {calendarWidth, style, onDayPress, ...others} = this.props;\n\n    return (\n      <Week \n        {...others} \n        key={item} \n        current={item} \n        style={[{width: calendarWidth || this.containerWidth}, style]}\n        markedDates={this.getMarkedDates()}\n        onDayPress={onDayPress || this.onDayPress}\n      />\n    );\n  }\n\n  getItemLayout = (data, index) => {\n    return {\n      length: this.containerWidth,\n      offset: this.containerWidth * index,\n      index\n    };\n  }\n\n  keyExtractor = (item, index) => index.toString();\n\n  render() {\n    const {allowShadow, firstDay, hideDayNames} = this.props;\n    const {items} = this.state;\n    let weekDaysNames = weekDayNames(firstDay);\n\n    return (\n      <View style={[allowShadow && this.style.containerShadow, !hideDayNames && {paddingBottom: 6}]}>\n        {!hideDayNames &&\n          <View style={[this.style.week, {marginTop: 12, marginBottom: -2}]}>\n            {/* {this.props.weekNumbers && <Text allowFontScaling={false} style={this.style.dayHeader}></Text>} */}\n            {weekDaysNames.map((day, idx) => (\n              <Text \n                allowFontScaling={false} \n                key={idx} \n                style={this.style.dayHeader} \n                numberOfLines={1} \n                accessibilityLabel={''}\n                // accessible={false} // not working\n                // importantForAccessibility='no'\n              >\n                {day}\n              </Text>\n            ))}\n          </View>}\n        <FlatList\n          ref={this.list}\n          data={items}\n          extraData={this.props.current || this.props.context.date}\n          style={this.style.container}\n          horizontal\n          showsHorizontalScrollIndicator={false}\n          pagingEnabled\n          scrollEnabled\n          renderItem={this.renderItem}\n          keyExtractor={this.keyExtractor}\n          initialScrollIndex={NUMBER_OF_PAGES}\n          getItemLayout={this.getItemLayout}\n          onScroll={this.onScroll}\n          onMomentumScrollEnd={this.onMomentumScrollEnd}\n        />\n      </View>\n    );\n  }\n}\n\nexport default asCalendarConsumer(WeekCalendar);\n"]},"metadata":{},"sourceType":"module"}